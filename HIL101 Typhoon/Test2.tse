version = 4.2

//
// Saved by sw version: 2025.4
//

model "New schematic 22-Dec-2025@11-37-50" {
    configuration {
        hil_device = "HIL101"
        hil_configuration_id = 1
        simulation_method = exact
        simulation_time_step = auto
        simulation_discret_scaling = 1.0
        dsp_timer_periods = 100e-6, 50e-3
        ss_calc_method = "systematic elimination"
        enb_pole_shift = True
        enb_gds_oversampling = True
        show_modes = False
        device_ao_limit_enable = False
        reset_analog_outputs_on_sim_stop = True
        reset_analog_outputs_on_sim_stop_mode = Offset values
        reset_digital_outputs_on_sim_stop = True
        vhil_adio_loopback = False
        dma_enable = False
        cpl_stb = False
        enb_dep_sw_detect = False
        code_section = "internal memory"
        data_section = "internal memory"
        sys_sp_rate_1 = 0.0001
        sys_sp_rate_2 = 0.05
        sys_real_type_precision = "default"
        user_real_type_precision = "default"
        sys_cpu_optimization = "high"
        user_cpu_optimization = "high"
        user_cpu_part_option = "default"
        matrix_based_reduction = True
        cpl_dynamics_analysis = False
        export_ss_to_pickle = False
        ground_scope_core = False
        dss_num_tol = 1e-15
        cce_platform = "generic"
        cce_use_relative_names = False
        cce_type_mapping_real = "double"
        cce_type_mapping_uint = "unsigned int"
        cce_type_mapping_int = "int"
        cce_platform = "generic"
        cce_use_relative_names = False
        cce_type_mapping_real = "double"
        cce_type_mapping_uint = "unsigned int"
        cce_type_mapping_int = "int"
        cce_term_var_location = "local"
        cce_directory = ""
        cce_custom_type_int = ""
        cce_custom_type_uint = ""
        cce_custom_type_real = ""
        tunable_params = "component defined"
        sp_compiler_type = "C compiler"
        sig_stim = "off"
        export_resource_list = ""
        export_dependency_list = ""
        excluded_resource_list = ""
        excluded_component_from_locking_list = ""
        export_out_file = ""
        export_lock_top_level = True
        export_encrypt_library = True
        export_encrypt_resources = True
        solver_type = "DAE"
        integration_method = "BDF"
        max_sim_step = 1e-4
        simulation_time = 1.0
        abs_tol = 1e-3
        rel_tol = 1e-3
        init_sim_step = 1e-6
        r_on_sw = 1e-3
        v_on_diode = 0.1
        data_sampling_rate = 0
        feedthrough_validation_error_level = error
    }

    component Subsystem Root {
        component "core/Battery ESS (Generic)" "Battery ESS (Generic)1" {
            Pnom = "250e3"
            Snom = "400e3"
            Vnom_sec_LL = "400"
            include_transformer = "False"
        }
        [
            position = 7872, 8344
            scale = -1, 1
            size = 144, 136
        ]

        component "core/Grid" Grid1 {
            Sb = "1e6"
            Vb = "400"
            resistance_cont = "10.0"
        }
        [
            position = 8328, 8052
            rotation = down
            size = 144, 136
        ]

        component "core/PV Power Plant (Generic)" "PV Power Plant (Generic)1" {
            Vnom_sec_LL = "400"
            include_transformer = "False"
        }
        [
            position = 8808, 8300
            size = 144, 136
        ]

        component "core/Variable Load (Generic)" "Variable Load (Generic)1" {
            resistance_cont = "1.0"
        }
        [
            position = 9000, 8296
            size = 144, 136
        ]

        component "core/Three-phase Meter" "Three-phase Meter1" {
        }
        [
            position = 8344, 8196
            rotation = right
            scale = -1, -1
            size = 56, 240
        ]

        component "core/ModBus Device" "ModBus Device1" {
            eth_port = "1"
            ethernet_port_per_device = "{\'HIL100\': {}, \'HIL101\': {\'0\': \'1\', \'1\': \'1\', \'2\': \'1\', \'3\': \'1\', \'4\': \'1\', \'5\': \'1\', \'6\': \'1\', \'7\': \'1\', \'8\': \'1\', \'9\': \'1\', \'10\': \'1\', \'11\': \'1\', \'12\': \'1\', \'13\': \'1\', \'14\': \'1\', \'15\': \'1\'}, \'HIL104\': {}, \'HIL402\': {}, \'HIL404\': {}, \'HIL506\': {}, \'HIL602+\': {}, \'HIL603\': {}, \'HIL604\': {}, \'HIL606\': {}, \'VHIL+\': {}}"
            ip_address_port = "True"
        }
        [
            position = 8152, 8356
            size = 144, 176
        ]

        component "core/Battery ESS (Generic) UI" "Battery ESS (Generic) UI1" {
        }
        [
            position = 8628, 8360
            scale = -1, 1
            size = 56, 136
        ]

        component "core/Model Control UI (Generic)" "Model Control UI (Generic)1" {
            Irradiance = "True"
            Pcurtailment = "True"
            Pcurtailment_rate_of_change = "True"
            Pnom_kW = "True"
            Qnom_kVAr = "True"
            Qref = "True"
            Qref_rate_of_change = "True"
            Snom_kVA = "True"
            Temperature = "True"
            component_select = "PV Power Plant"
            input_category_select = "References and droops"
            output_category_select = "Nominal values"
        }
        [
            position = 8412, 8364
            size = 160, 160
        ]

        junction Junction1 sp
        [
            position = 8028, 8392
        ]

        junction Junction2 sp
        [
            position = 8060, 8296
        ]

        junction Junction3 sp
        [
            position = 8060, 8336
        ]

        connect "Battery ESS (Generic)1.ui_out" Junction1 as Connection3
        [
            breakpoints = 8028, 8344
        ]
        connect Junction1 "ModBus Device1.holding_out" as Connection4
        [
            breakpoints = 8028, 8484; 8240, 8484
        ]
        connect "Battery ESS (Generic)1.ui_in" Junction2 as Connection6
        connect "ModBus Device1.coil_in" Junction2 as Connection8
        connect Junction2 Junction3 as Connection9
        connect Junction3 "ModBus Device1.holding_in" as Connection10
        connect "ModBus Device1.discrete_in" Junction3 as Connection11
        connect Junction1 "Battery ESS (Generic)1.ext_inputs" as Connection15
        [
            breakpoints = 8028, 8392
        ]
        connect "ModBus Device1.coil_out" Junction1 as Connection16
        [
            breakpoints = 8256, 8292; 8256, 8504; 8256, 8504; 8256, 8512; 8028, 8512
        ]
    }

    default {
        "core/Battery ESS (Generic)" {
            Pnom = "20e3"
            Snom = "40e3"
            Vnom_LL = "400"
            fnom = "50"
            include_transformer = "True"
            Vnom_sec_LL = "2300"
            wL_pu = "0.1"
            Zt_pu = "0.04"
            dc_link_margin = "0.4"
            opc_pu = "0.0"
            Rshunt_pu = "2000"
            Tfast = "100e-6"
            Tslow = "500e-6"
            Sg_sc_pu = "20"
            PFg = "0.1"
            cont_type = "Ideal"
            resistance_cont = "1.0"
            nom_batt_voltage = "200"
            nom_batt_capacity = "120"
            soc_range = "[10, 90]"
            grid_code_fcn = "LVRT"
            lvrt_req = "Germany"
            vs_lvrt = "[0.0, 0.9, 0.901]"
            ts_lvrt = "[0.15, 1.5, 1.501]"
            preview = "Plot LVRT curve"
            voltvar_req = "Custom"
            vs_voltvar = "[0.6, 0.9, 1.1, 1.3]"
            qs_voltvar = "[1.3, 0.0, 0.0, -0.7]"
            preview_voltvar = "Plot VoltVAr curve"
            hzwatt_req = "Custom"
            fs_hzwatt = "[47.5, 47.8, 49.8, 50.2, 51.5]"
            ps_hzwatt = "[2.0, 2.0, 0.0, 0.0, -0.52]"
            preview_hzwatt = "Plot HzWatt curve"
            voltwatt_req = "Custom"
            vs_voltwatt = "[0.8, 1.06, 1.1, 1.3]"
            ps_voltwatt = "[1.0, 1.0, 0.2, 0.2]"
            preview_voltwatt = "Plot VoltWatt curve"
        }

        "core/Grid" {
            Vb = "2300"
            f = "50"
            Sb = "20*40e3"
            pf = "0.1"
            Tfast = "100e-6"
            cont_type = "Ideal"
            resistance_cont = "0"
        }

        "core/ModBus Device" {
            hil_id = "0"
            configuration = "config1"
            preview = "Configuration preview"
            eth_port = ""
            ethernet_port_per_device = "{ \"HIL100\": {}, \"HIL101\": {}, \"HIL104\": {}, \"HIL402\": {}, \"HIL404\": {}, \"HIL506\": {}, \"HIL602+\": {}, \"HIL603\": {}, \"HIL604\": {}, \"HIL606\": {}, \"VHIL+\": {} }"
            ip_addr = "192.168.0.210"
            ip_addr_src = "Dictionary"
            netmask = "255.255.255.0"
            netmask_src = "Dictionary"
            port = "502"
            port_src = "Dictionary"
            slave_id = "1"
            slave_id_src = "Dictionary"
            gateway_enable = "False"
            gateway = "192.168.0.210"
            gateway_src = "Dictionary"
            enable_pipeline = "True"
            ip_address_port = "False"
            request_counter_port = "None"
            message_delay = "None"
            connection_loss = "None"
            defines = ""
            modbus_sunspec = "False"
            logging = "False"
            execution_rate = "100e-6"
            _supported_platforms = "[\'hil\']"
        }

        "core/Model Control UI (Generic)" {
            component_select = "Battery ESS"
            input_category_select = "Converter status"
            output_category_select = "Converter status"
            Enable_fb = "False"
            Converter_mode_fb = "False"
            MCB_status = "False"
            state = "False"
            alarm_msg = "False"
            Pnom_kW = "False"
            Qnom_kVAr = "False"
            Snom_kVA = "False"
            Vnom_LL_V = "False"
            Fnom_Hz = "False"
            nom_wind_speed_m_per_s = "False"
            Pref_fb_kW = "False"
            Qref_fb_kVAr = "False"
            Vrms_ref_fb_V = "False"
            Fref_fb_Hz = "False"
            Pmeas_kW = "False"
            Pa_meas_kW = "False"
            Pb_meas_kW = "False"
            Pc_meas_kW = "False"
            Qmeas_kVAr = "False"
            Qa_meas_kVAr = "False"
            Qb_meas_kVAr = "False"
            Qc_meas_kVAr = "False"
            Smeas_kVA = "False"
            PFmeas = "False"
            Vgrid_rms_meas_kV = "False"
            Vconv_rms_meas_V = "False"
            Fmeas_Hz = "False"
            Ibatt_A = "False"
            Vbatt_V = "False"
            Vdc_V = "False"
            Idc_A = "False"
            SOC = "False"
            SOH = "False"
            Available_Ppv_kW = "False"
            curtailment_status = "False"
            rotational_speed_RPM = "False"
            wind_speed_m_per_s = "False"
            turbine_stalled = "False"
            pitch_ctrl_on = "False"
            avg_wind_speed_1 = "False"
            avg_wind_speed_2 = "False"
            avg_wind_speed_sc = "False"
            prot_trip = "False"
            P_red_on = "False"
            P_cut_out = "False"
            Vgen_rms_meas_V = "False"
            Gen_speed_RPM = "False"
            Vdc_in = "False"
            Vdc_out = "False"
            Idc_in = "False"
            Idc_out = "False"
            P_in = "False"
            P_out = "False"
            Enable = "False"
            Converter_mode = "False"
            Reset_alarms = "False"
            Pref = "False"
            Qref = "False"
            Frequency_droop_offset = "False"
            Frequency_droop_coeff = "False"
            Voltage_droop_offset = "False"
            Voltage_droop_coeff = "False"
            Power_droop_coeff = "False"
            Droop_voltage_offset = "False"
            P_alarm_upper_limit = "False"
            Vrms_ref = "False"
            Fref = "False"
            Max_SOC = "False"
            Min_SOC = "False"
            Pref_rate_of_change = "False"
            Qref_rate_of_change = "False"
            Vrms_ref_rate_of_change = "False"
            Fref_rate_of_change = "False"
            Pcurtailment = "False"
            Pcurtailment_rate_of_change = "False"
            MPPT_rate_of_change = "False"
            Enable_storm_control = "False"
            int1_wind_speed_max = "False"
            int2_wind_speed_max = "False"
            P_reduction_wind_speed__SC_ = "False"
            Average_wind_speed_max__SC_ = "False"
            Cut_out_wind_speed__SC_ = "False"
            time_interval_1 = "False"
            time_interval_2 = "False"
            Recovery_time = "False"
            time_interval__SC_ = "False"
            Operation_mode = "False"
            Initial_SOC = "False"
            Initial_SOH = "False"
            Temperature = "False"
            Irradiance = "False"
            Wind_speed = "False"
            P_dependency_type = "False"
            Q_dependency_type = "False"
            P_V_k1 = "False"
            P_V_k2 = "False"
            P_f_k1 = "False"
            P_f_k2 = "False"
            Q_V_k1 = "False"
            Q_V_k2 = "False"
            Q_f_k1 = "False"
            Q_f_k2 = "False"
            Batt_cap_nom_Ah = "False"
            Lvrt_active_status = "False"
            LVRT_enable = "False"
            Vload_rms_meas_V = "False"
            LVRT_Q_contribution = "False"
            LVRT_P_set = "False"
            V_alarm_upper_limit = "False"
            V_alarm_lower_limit = "False"
            F_alarm_upper_limit = "False"
            F_alarm_lower_limit = "False"
            S_alarm_upper_limit = "False"
            I_alarm_upper_limit = "False"
            I_alarm_timeout = "False"
            Drift_alarm_freq_bound = "False"
            Sync_timeout = "False"
            VoltVAr_enable = "False"
            HzWatt_enable = "False"
            VoltWatt_enable = "False"
        }

        "core/PV Power Plant (Generic)" {
            Pnom = "250e3"
            Snom = "np.sqrt(2.0)*250e3"
            Vnom_LL = "400"
            fnom = "50"
            include_transformer = "True"
            Vnom_sec_LL = "13.8e3"
            ILR_factor = "1.2"
            wL_pu = "0.1"
            Zt_pu = "0.04"
            dc_link_margin = "0.4"
            opc_pu = "0.0"
            Rshunt_pu = "2000"
            Tfast = "100e-6"
            Tslow = "500e-6"
            Sg_sc_pu = "20"
            PFg = "0.1"
            cont_type = "Ideal"
            resistance_cont = "1.0"
            grid_code_fcn = "LVRT"
            lvrt_req = "Germany"
            vs_lvrt = "[0.0, 0.9, 0.901]"
            ts_lvrt = "[0.15, 1.5, 1.501]"
            preview = "Plot LVRT curve"
            voltvar_req = "Custom"
            vs_voltvar = "[0.6, 0.9, 1.1, 1.3]"
            qs_voltvar = "[1.3, 0.0, 0.0, -0.7]"
            preview_voltvar = "Plot VoltVAr curve"
            hzwatt_req = "Custom"
            fs_hzwatt = "[47.5, 47.8, 49.8, 50.2, 51.5]"
            ps_hzwatt = "[2.0, 2.0, 0.0, 0.0, -0.52]"
            preview_hzwatt = "Plot HzWatt curve"
            voltwatt_req = "Custom"
            vs_voltwatt = "[0.8, 1.06, 1.1, 1.3]"
            ps_voltwatt = "[1.0, 1.0, 0.2, 0.2]"
            preview_voltwatt = "Plot VoltWatt curve"
        }

        "core/Three-phase Meter" {
            R = "1e5"
            n_cycles = "1"
            Ts = "100e-6"
            enable_probes = "True"
            enable_out = "True"
            remove_snubber = "False"
            enable_bandwidth = "False"
            bandwidth = "10e3"
            VAn = "True"
            VBn = "True"
            VCn = "True"
            VAB = "False"
            VBC = "False"
            VCA = "False"
            VN = "False"
            IA = "True"
            IB = "True"
            IC = "True"
            IN = "False"
            freq = "False"
            VLn_rms = "False"
            VLL_rms = "False"
            VLn_avg_rms = "False"
            VLL_avg_rms = "False"
            VN_rms = "False"
            I_rms = "False"
            I_avg_rms = "False"
            IN_rms = "False"
            P_method = "alpha-beta"
            enable_extra_out = "False"
            P_meas = "False"
        }

        "core/Variable Load (Generic)" {
            Pnom = "10e3"
            Snom = "np.sqrt(2)*10e3"
            Vnom_LL = "400"
            fnom = "50"
            include_transformer = "False"
            Vnom_sec_LL = "400"
            wL_pu = "0.1"
            Zt_pu = "0.04"
            dc_link_margin = "0.4"
            opc_pu = "0.2"
            Rshunt_pu = "2000"
            Sg_sc_pu = "20"
            PFg = "0.1"
            cont_type = "Ideal"
            resistance_cont = "0"
            Tfast = "100e-6"
            Tslow = "500e-6"
        }
    }
}
