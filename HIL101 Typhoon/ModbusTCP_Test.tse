version = 4.2

//
// Saved by sw version: 2025.4
//

model "ModbusTCP_Test" {
    configuration {
        hil_device = "VHIL+"
        hil_configuration_id = 1
        simulation_method = exact
        simulation_time_step = auto
        simulation_discret_scaling = 1.0
        dsp_timer_periods = 100e-6, 50e-3
        ss_calc_method = "systematic elimination"
        enb_pole_shift = True
        enb_gds_oversampling = True
        show_modes = False
        device_ao_limit_enable = False
        reset_analog_outputs_on_sim_stop = True
        reset_analog_outputs_on_sim_stop_mode = Offset values
        reset_digital_outputs_on_sim_stop = True
        vhil_adio_loopback = False
        dma_enable = False
        cpl_stb = False
        enb_dep_sw_detect = False
        code_section = "internal memory"
        data_section = "internal memory"
        sys_sp_rate_1 = 0.0001
        sys_sp_rate_2 = 0.05
        sys_real_type_precision = "default"
        user_real_type_precision = "default"
        sys_cpu_optimization = "high"
        user_cpu_optimization = "high"
        user_cpu_part_option = "default"
        matrix_based_reduction = True
        cpl_dynamics_analysis = False
        export_ss_to_pickle = False
        ground_scope_core = False
        dss_num_tol = 1e-15
        cce_platform = "generic"
        cce_use_relative_names = False
        cce_type_mapping_real = "double"
        cce_type_mapping_uint = "unsigned int"
        cce_type_mapping_int = "int"
        cce_platform = "generic"
        cce_use_relative_names = False
        cce_type_mapping_real = "double"
        cce_type_mapping_uint = "unsigned int"
        cce_type_mapping_int = "int"
        cce_term_var_location = "local"
        cce_directory = ""
        cce_custom_type_int = ""
        cce_custom_type_uint = ""
        cce_custom_type_real = ""
        tunable_params = "component defined"
        sp_compiler_type = "C compiler"
        sig_stim = "off"
        export_resource_list = ""
        export_dependency_list = ""
        excluded_resource_list = ""
        excluded_component_from_locking_list = ""
        export_out_file = ""
        export_lock_top_level = True
        export_encrypt_library = True
        export_encrypt_resources = True
        solver_type = "DAE"
        integration_method = "BDF"
        max_sim_step = 1e-4
        simulation_time = 1.0
        abs_tol = 1e-3
        rel_tol = 1e-3
        init_sim_step = 1e-6
        r_on_sw = 1e-3
        v_on_diode = 0.1
        data_sampling_rate = 0
        feedthrough_validation_error_level = error
    }

    component Subsystem Root {
        component "core/ModBus Device" "ModBus Device1" {
            eth_port = "1"
            ethernet_port_per_device = "{\'HIL100\': {}, \'HIL101\': {}, \'HIL104\': {}, \'HIL402\': {}, \'HIL404\': {}, \'HIL506\': {}, \'HIL602+\': {}, \'HIL603\': {}, \'HIL604\': {}, \'HIL606\': {}, \'VHIL+\': {\'0\': \'1\', \'1\': \'1\', \'2\': \'1\', \'3\': \'1\', \'4\': \'1\', \'5\': \'1\', \'6\': \'1\', \'7\': \'1\', \'8\': \'1\', \'9\': \'1\', \'10\': \'1\', \'11\': \'1\', \'12\': \'1\', \'13\': \'1\', \'14\': \'1\', \'15\': \'1\'}}"
            gateway_src = "Dialog"
            ip_addr = "192.168.0.211"
            slave_id = "17"
        }
        [
            position = 8204, 8184
            size = 184, 184
        ]

        component "core/Termination" Termination1 {
        }
        [
            position = 8380, 8112
        ]

        component "core/Termination" Termination2 {
        }
        [
            position = 8400, 8252
        ]

        component "core/Constant" Constant1 {
            value = "0"
        }
        [
            position = 8008, 8112
        ]

        component "core/Bus Join" "Bus Join1" {
            inputs = "3"
        }
        [
            position = 8016, 8256
        ]

        component "core/Constant" Constant2 {
        }
        [
            position = 7936, 8196
        ]

        component "core/Constant" Constant3 {
        }
        [
            position = 7936, 8256
        ]

        component "core/Constant" Constant4 {
        }
        [
            position = 7932, 8316
        ]

        junction Junction1 sp
        [
            position = 8064, 8112
        ]

        junction Junction2 sp
        [
            position = 8064, 8160
        ]

        connect "ModBus Device1.coil_out" Termination1.in as Connection1
        connect Termination2.in "ModBus Device1.holding_out" as Connection2
        connect "ModBus Device1.coil_in" Junction1 as Connection4
        connect Junction1 Constant1.out as Connection5
        connect "ModBus Device1.discrete_in" Junction2 as Connection7
        connect Junction2 Junction1 as Connection8
        connect "ModBus Device1.holding_in" Junction2 as Connection9
        connect Constant2.out "Bus Join1.in" as Connection10
        connect Constant3.out "Bus Join1.in1" as Connection11
        connect Constant4.out "Bus Join1.in2" as Connection12
        connect "Bus Join1.out" "ModBus Device1.reg_in" as Connection13
    }

    default {
        "core/Bus Join" {
            inputs = "2"
            execution_rate = "inherit"
        }

        "core/Constant" {
            value = "1"
            signal_type = "real"
            execution_rate = "100e-6"
            _tunable = "False"
        }

        "core/Termination" {
            execution_rate = "inherit"
        }

        "core/ModBus Device" {
            hil_id = "0"
            configuration = "config1"
            preview = "Configuration preview"
            eth_port = ""
            ethernet_port_per_device = "{ \"HIL100\": {}, \"HIL101\": {}, \"HIL104\": {}, \"HIL402\": {}, \"HIL404\": {}, \"HIL506\": {}, \"HIL602+\": {}, \"HIL603\": {}, \"HIL604\": {}, \"HIL606\": {}, \"VHIL+\": {} }"
            ip_addr = "192.168.0.210"
            ip_addr_src = "Dictionary"
            netmask = "255.255.255.0"
            netmask_src = "Dictionary"
            port = "502"
            port_src = "Dictionary"
            slave_id = "1"
            slave_id_src = "Dictionary"
            gateway_enable = "False"
            gateway = "192.168.0.210"
            gateway_src = "Dictionary"
            enable_pipeline = "True"
            ip_address_port = "False"
            request_counter_port = "None"
            message_delay = "None"
            connection_loss = "None"
            defines = ""
            modbus_sunspec = "False"
            logging = "False"
            execution_rate = "100e-6"
            _supported_platforms = "[\'hil\']"
        }
    }

    CODE model_init
        # Numpy module is imported as 'np'
        # Scipy module is imported as 'sp'
        # The Schematic API is imported as 'mdl'
        # To get the model file path, use 'mdl.get_model_file_path()'
        # To print information to the console, use info()
        
        config1 = {
            'port': 502,
            'ip_addr': '192.168.0.211',
            'netmask': '255.255.255.0',
            'slave_id': 17,
            'coil_input_addresses': '',
            'coil_output_addresses': '',
            'discrete_input_addresses': '',
            'holding_register_input_addresses': '',
            'holding_register_output_addresses': '',
            'input_register_adresses': '[0,1]f,[2,3]f,[4,5]f'
        }
    ENDCODE
}
